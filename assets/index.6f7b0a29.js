var e=(e,t,i)=>new Promise(((n,o)=>{var a=e=>{try{l(i.next(e))}catch(t){o(t)}},s=e=>{try{l(i.throw(e))}catch(t){o(t)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,s);l((i=i.apply(e,t)).next())}));import{u as t,_ as i}from"./useTable.81787a2e.js";import{_ as n}from"./useForm.f93bccee.js";import{l as o,c as a,s,_ as l,d as r}from"./ClientModal.vue_vue&type=script&setup=true&lang.c60b9be9.js";import{b as d}from"./index.1d3e54eb.js";import{a7 as c}from"./index.6a5548ea.js";import{B as u,N as m,Z as p,bE as f,D as b,E as j,w as g,a2 as h,F as x,u as y,a9 as _,t as w}from"./vendor.7c679a32.js";import"./props.df8b9a2a.js";import"./const.ba9bd2e6.js";import"./useWindowSizeFn.bec912bd.js";import"./onMountedOrActivated.51a605f4.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./dateUtil.839e4f2c.js";/* empty css              */import"./useSortable.7806d92e.js";/* empty css              *//* empty css              *//* empty css              */import"./index.1c4a88d9.js";/* empty css              */import"./download.38a3a81a.js";import"./index.3b2c921a.js";const v=_("新增客户端"),S=_("修改客户端"),C=_("删除客户端");var k=u({setup(u){const _=m({single:!0,multiple:!0}),{createConfirm:k,createMessage:R}=c(),[T,{openModal:M}]=d(),[I,{reload:F,clearSelectedRowKeys:Y,getSelectRowKeys:D}]=t({title:"客户端列表",api:o,rowKey:"clientId",columns:a,formConfig:{labelWidth:120,schemas:s,autoSubmitOnEnter:!0,fieldMapToTime:[["dateRange",["beginTime","endTime"],"YYYY-MM-DD"]]},rowSelection:{type:"checkbox"},useSearchForm:!0,showTableSetting:!0,bordered:!0,clickToRowSelect:!1,showIndexColumn:!1,actionColumn:{width:220,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:!1},handleSearchInfoFn:()=>Y()});function E(e){const t=w(null==e?void 0:e.keys)||[];_.single=1!=t.length,_.multiple=!t.length}function K(e){e=e||{clientId:D()},M(!0,{_tag:"edit",record:e})}function O(t){return e(this,null,(function*(){const i=(null==t?void 0:t.clientId)||D();k({iconType:"warning",title:"警告",content:`是否确认删除客户端编号为${i}客户端吗?`,onOk:()=>e(this,null,(function*(){yield r(i),R.success("删除成功!"),P()}))})}))}function P(){Y(),F()}return(e,t)=>{const o=p("a-button"),a=f("auth");return b(),j("div",null,[g(y(i),{onRegister:y(I),onSelectionChange:E},{toolbar:h((()=>[x(g(o,{type:"primary",onClick:t[0]||(t[0]=e=>{M(!0,{_tag:"add"})})},{default:h((()=>[v])),_:1},512),[[a,["client_add"]]]),x(g(o,{type:"primary",disabled:y(_).single,onClick:t[1]||(t[1]=e=>K())},{default:h((()=>[S])),_:1},8,["disabled"]),[[a,["client_edit"]]]),x(g(o,{type:"primary",disabled:y(_).multiple,onClick:t[2]||(t[2]=e=>O())},{default:h((()=>[C])),_:1},8,["disabled"]),[[a,["client_del"]]])])),action:h((({record:e})=>[g(y(n),{actions:[{label:"编辑",icon:"fa6-regular:pen-to-square",auth:["client_edit"],onClick:K.bind(null,e)},{label:"删除",icon:"ant-design:delete-outlined",color:"error",auth:["client_del"],onClick:O.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"]),g(l,{onRegister:y(T),onSuccess:P},null,8,["onRegister"])])}}});export{k as default};
