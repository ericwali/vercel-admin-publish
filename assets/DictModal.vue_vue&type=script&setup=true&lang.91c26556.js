var e=(e,t,s)=>new Promise(((a,o)=>{var l=e=>{try{n(s.next(e))}catch(t){o(t)}},r=e=>{try{n(s.throw(e))}catch(t){o(t)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,r);n((s=s.apply(e,t)).next())}));import{d as t,c as s}from"./useForm.f93bccee.js";import{af as a,c1 as o,B as l,r,u as n,D as d,_ as i,a2 as c,w as p,a1 as u}from"./vendor.7c679a32.js";/* empty css              */import{af as m}from"./index.6a5548ea.js";import{a as y,B as f}from"./index.1d3e54eb.js";const b=[{title:"字典名称",dataIndex:"name"},{title:"字典类型",dataIndex:"type"},{title:"系统内置",dataIndex:"isSys",width:90,customRender:({record:e})=>{const t=0==~~e.isSys,s=t?"是":"否";return a(o,{color:t?"green":"red"},(()=>s))}},{title:"状态",dataIndex:"status",width:130,customRender:({record:e})=>{const t=0==~~e.status,s=t?"启用":"禁用";return a(o,{color:t?"green":"red"},(()=>s))}}],g=[{field:"name",label:"字典名称",component:"Input",componentProps:{placeholder:"请输入字典名称"},colProps:{span:8}},{field:"type",label:"字典类型",component:"Input",componentProps:{placeholder:"请输入字典类型"},colProps:{span:8}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"正常",value:"0"},{label:"停用",value:"1"}]},colProps:{span:8}}],v=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:"字典名称",component:"Input",required:!0,colProps:{span:12}},{field:"type",label:"字典类型",component:"Input",colProps:{span:12},rules:[{required:!0,whitespace:!0,message:"请输入字典类型!"},{pattern:new RegExp("^[0-9a-zA-Z_]{1,}$","g"),message:"只允许包含数字,字母,下划线!"}]},{field:"isSys",label:"系统内置",component:"Select",required:!0,defaultValue:"0",componentProps:{options:[{label:"是",value:"0"},{label:"否",value:"1"}]},colProps:{span:12}},{field:"status",label:"状态",component:"Select",required:!0,defaultValue:"0",componentProps:{options:[{label:"启用",value:"0"},{label:"禁用",value:"1"}]},colProps:{span:12}},{field:"remarks",label:"备注",component:"InputTextArea",componentProps:{rows:6},colProps:{span:24}}];var h,x;(x=h||(h={})).list="/system_proxy/system/dict/list",x.add="/system_proxy/system/dict/save",x.get="/system_proxy/system/dict",x.edit="/system_proxy/system/dict/update",x.del="/system_proxy/system/dict/remove",x.changeStatus="/system_proxy/system/dict/changeStatus";const P=e=>m.get({url:h.list,params:e},{isReturnResultResponse:!0}),w=e=>m.delete({url:`${h.del}/${e}`});var _=l({emits:["success","register"],setup(a,{emit:o}){const l=r(""),[b,{resetFields:g,setFieldsValue:x,validate:P,clearValidate:w,updateSchema:_}]=t({labelWidth:100,schemas:v,showActionButtonGroup:!1,baseColProps:{span:24}}),[I,{setModalProps:R,closeModal:S}]=y(((...t)=>e(this,[...t],(function*(e={_tag:""}){var t;yield g(),yield w(),l.value=e._tag;const s=null==(t=e.record)?void 0:t.id,a={confirmLoading:!1};switch(yield _([{field:"type",componentProps:{disabled:"add"!=n(l)}}]),n(l)){case"add":a.title="新增字典";break;case"edit":a.title="编辑字典",yield x(yield(o=s,m.get({url:`${h.get}/${o}`})))}var o;R(a)}))));function $(){return e(this,null,(function*(){try{const t=yield P();switch(R({confirmLoading:!0}),n(l)){case"add":yield(e=t,m.post({url:h.add,data:e}));break;case"edit":yield(e=>m.put({url:h.edit,data:e}))(t)}S(),o("success")}finally{R({confirmLoading:!1})}var e}))}return(e,t)=>(d(),i(n(f),u(e.$attrs,{width:"720px",onRegister:n(I),onOk:$}),{default:c((()=>[p(n(s),{onRegister:n(b)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}});export{_,b as c,w as d,P as l,g as s};
