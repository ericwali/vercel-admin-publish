import{u as e,_ as o}from"./useTable.81787a2e.js";import{_ as n}from"./useForm.f93bccee.js";import{b as t}from"./index.1d3e54eb.js";import{l as i,c as a,s as r,_ as s,d}from"./RegionModal.vue_vue&type=script&setup=true&lang.bfdebc69.js";import{a7 as l}from"./index.6a5548ea.js";import{B as c,Z as p,D as m,E as u,w as f,a2 as b,u as j,a9 as x}from"./vendor.7c679a32.js";import"./props.df8b9a2a.js";import"./const.ba9bd2e6.js";import"./useWindowSizeFn.bec912bd.js";import"./onMountedOrActivated.51a605f4.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./dateUtil.839e4f2c.js";/* empty css              */import"./useSortable.7806d92e.js";/* empty css              *//* empty css              *//* empty css              */import"./index.1c4a88d9.js";/* empty css              */import"./download.38a3a81a.js";import"./index.3b2c921a.js";const g=x("新增区域");var h=c({setup(c){const{createMessage:x}=l(),[h,{openModal:v}]=t(),[w,{reload:y,getDataSource:R,setLoading:S,collapseAll:T}]=e({title:"区域列表",api:i,rowKey:"id",columns:a,formConfig:{labelWidth:120,schemas:r,autoSubmitOnEnter:!0,fieldMapToTime:[["dateRange",["beginTime","endTime"],"YYYY-MM-DD"]]},isTreeTable:!0,pagination:!1,striped:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:250,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:!1},searchInfo:{parentId:"0"},handleSearchInfoFn:()=>T()});function _(e,o){e&&(S(!0),i({parentId:o.id}).then((e=>{o.children=e,S(!1)})).catch((()=>S(!1))))}function C(e){v(!0,{_tag:"add",record:e})}function M(e){v(!0,{_tag:"edit",record:e})}function I(e){return o=this,n=null,t=function*(){yield d(e.id),x.success("删除成功!"),D()},new Promise(((e,i)=>{var a=e=>{try{s(t.next(e))}catch(o){i(o)}},r=e=>{try{s(t.throw(e))}catch(o){i(o)}},s=o=>o.done?e(o.value):Promise.resolve(o.value).then(a,r);s((t=t.apply(o,n)).next())}));var o,n,t}function D(){y(),T()}return(e,t)=>{const i=p("a-button");return m(),u("div",null,[f(j(o),{onRegister:j(w),onExpand:_},{toolbar:b((()=>[f(i,{type:"primary",onClick:t[0]||(t[0]=e=>C())},{default:b((()=>[g])),_:1})])),action:b((({record:e})=>[f(j(n),{actions:[{label:"编辑",icon:"fa6-regular:pen-to-square",onClick:M.bind(null,e)},{label:"新增",icon:"ant-design:plus-circle-outlined",onClick:C.bind(null,e)},{label:"删除",icon:"ant-design:delete-outlined",color:"error",popConfirm:{title:"是否确认删除",confirm:I.bind(null,e)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),f(s,{onRegister:j(h),onSuccess:D},null,8,["onRegister"])])}}});export{h as default};
