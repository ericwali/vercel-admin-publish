import{u as e,_ as t}from"./useTable.81787a2e.js";import{_ as o}from"./useForm.f93bccee.js";import{l as a,d as i}from"./menu.9d58d752.js";import{b as n}from"./index.1d3e54eb.js";import{aG as s,a7 as r}from"./index.6a5548ea.js";import{c as d,s as l,_ as c}from"./MenuModal.vue_vue&type=script&setup=true&lang.51892230.js";import{B as u,Z as m,bE as p,D as f,E as b,w as j,a2 as x,F as g,u as h,a9 as _}from"./vendor.7c679a32.js";import"./props.df8b9a2a.js";import"./const.ba9bd2e6.js";import"./useWindowSizeFn.bec912bd.js";import"./onMountedOrActivated.51a605f4.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./dateUtil.839e4f2c.js";/* empty css              */import"./useSortable.7806d92e.js";/* empty css              *//* empty css              *//* empty css              */import"./index.1c4a88d9.js";/* empty css              */import"./download.38a3a81a.js";import"./index.3b2c921a.js";const v=_("新增菜单"),C=_("展开全部"),y=_("折叠全部");var w=u({setup(u){const{createMessage:_}=r(),[w,{openModal:M}]=n(),[T,{reload:k,expandAll:R,collapseAll:S}]=e({title:"菜单列表",api:a,rowKey:"id",columns:d,formConfig:{labelWidth:120,schemas:l,autoSubmitOnEnter:!0,fieldMapToTime:[["dateRange",["beginTime","endTime"],"YYYY-MM-DD"]]},isTreeTable:!0,pagination:!1,striped:!1,useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,canResize:!1,actionColumn:{width:250,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:!1},afterFetch:e=>s(e)});function F(e){M(!0,{_tag:"add",record:e})}function Y(e){M(!0,{_tag:"edit",record:e})}function A(e){return t=this,o=null,a=function*(){yield i(e.id),_.success("删除成功!"),D()},new Promise(((e,i)=>{var n=e=>{try{r(a.next(e))}catch(t){i(t)}},s=e=>{try{r(a.throw(e))}catch(t){i(t)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);r((a=a.apply(t,o)).next())}));var t,o,a}function D(){k()}return(e,a)=>{const i=m("a-button"),n=p("auth");return f(),b("div",null,[j(h(t),{onRegister:h(T)},{toolbar:x((()=>[g(j(i,{type:"primary",onClick:a[0]||(a[0]=e=>F())},{default:x((()=>[v])),_:1},512),[[n,["menu_add"]]]),j(i,{type:"default",onClick:h(R)},{default:x((()=>[C])),_:1},8,["onClick"]),j(i,{type:"default",onClick:h(S)},{default:x((()=>[y])),_:1},8,["onClick"])])),action:x((({record:e})=>[j(h(o),{actions:[{label:"编辑",icon:"fa6-regular:pen-to-square",auth:["menu_edit"],onClick:Y.bind(null,e)},{label:"新增",icon:"ant-design:plus-circle-outlined",auth:["menu_add"],onClick:F.bind(null,e)},{label:"删除",icon:"ant-design:delete-outlined",auth:["menu_del"],color:"error",popConfirm:{title:"是否确认删除",confirm:A.bind(null,e)}}]},null,8,["actions"])])),_:1},8,["onRegister"]),j(c,{onRegister:h(w),onSuccess:D},null,8,["onRegister"])])}}});export{w as default};
