var e=(e,t,a)=>new Promise(((o,s)=>{var n=e=>{try{r(a.next(e))}catch(t){s(t)}},l=e=>{try{r(a.throw(e))}catch(t){s(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,l);r((a=a.apply(e,t)).next())}));import{d as t,c as a}from"./useForm.f93bccee.js";import{af as o,c1 as s,B as n,r as l,u as r,D as i,_ as d,a2 as c,w as p,a1 as m}from"./vendor.7c679a32.js";/* empty css              */import{l as u,g as f,e as h,a as P}from"./tenant.97003ced.js";import{a as v,B as b}from"./index.1d3e54eb.js";import{aF as g}from"./index.6a5548ea.js";const w=[{title:"多租户名称",dataIndex:"name"},{title:"多租户编码",dataIndex:"code"},{title:"开始时间",dataIndex:"tenantStartTime",width:200},{title:"结束时间",dataIndex:"tenantEndTime",width:200},{title:"状态",dataIndex:"status",width:120,customRender:({record:e})=>{const t=0==~~e.status,a=t?"启动":"冻结";return o(s,{color:t?"green":"red"},(()=>a))}},{title:"备注",dataIndex:"remarks",width:300,customRender:({record:e})=>e.remarks||o(s,{color:"red"},(()=>"暂无数据"))}],y=[{field:"name",label:"多租户名称",component:"Input",componentProps:{placeholder:"请输入多租户名称"},colProps:{span:8}},{field:"code",label:"多租户编码",component:"Input",componentProps:{placeholder:"请输入多租户编码"},colProps:{span:7}},{field:"status",label:"状态",component:"Select",componentProps:{options:[{label:"启动",value:"0"},{label:"冻结",value:"1"}]},colProps:{span:8}}],x=[{field:"id",label:"ID",component:"Input",show:!1},{field:"name",label:"多租户名称",component:"Input",required:!0,colProps:{span:12}},{field:"code",label:"多租户编码",component:"Input",colProps:{span:12}},{field:"tenantStartTime",label:"开始时间",component:"DatePicker",required:!0,componentProps:{style:{width:"100%"},valueFormat:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择开始日期"},colProps:{span:12}},{field:"tenantEndTime",label:"结束时间",component:"DatePicker",required:!0,componentProps:{style:{width:"100%"},valueFormat:"YYYY-MM-DD HH:mm:ss",placeholder:"请选择开始日期"},colProps:{span:12}},{field:"status",label:"状态",component:"RadioGroup",defaultValue:"0",componentProps:{options:[{label:"启动",value:"0"},{label:"冻结",value:"1"}]},colProps:{span:12}},{label:"备注",field:"remarks",component:"InputTextArea",componentProps:{rows:6},colProps:{span:24}}];var I=n({emits:["success","register"],setup(o,{emit:s}){const n=l(""),[w,{resetFields:y,setFieldsValue:I,validate:k,clearValidate:D,updateSchema:R}]=t({labelWidth:100,schemas:x,showActionButtonGroup:!1,baseColProps:{span:24}}),[Y,{setModalProps:j,closeModal:F}]=v(((...t)=>e(this,[...t],(function*(t={_tag:""}){var a;yield y(),yield D(),n.value=t._tag;const o=null==(a=t.record)?void 0:a.id,s={confirmLoading:!1};switch(yield R({field:"code",componentProps:{disabled:"edit"==n.value},rules:[{required:!0,whitespace:!0,message:"请输入多租户编码!"},{len:19,message:"编码长度必须为19位!"},{pattern:new RegExp("^[0-9a-zA-Z_]{1,}$","g"),message:"只允许包含数字,字母,下划线!"},{validator:(t,a)=>e(this,null,(function*(){var e;if(!g(a)){const t=null==(e=(yield u({code:a})).data)?void 0:e.filter((e=>e.id!=o));if((null==t?void 0:t.length)>0)return Promise.reject("该多租户编码已存在")}return Promise.resolve()})),validateTrigger:"blur"}]}),r(n)){case"add":s.title="新增多租户";break;case"edit":s.title="编辑多租户",yield I(yield f(o))}j(s)}))));function M(){return e(this,null,(function*(){try{const e=yield k();switch(j({confirmLoading:!0}),r(n)){case"add":yield P(e);break;case"edit":yield h(e)}F(),s("success")}finally{j({confirmLoading:!1})}}))}return(e,t)=>(i(),d(r(b),m(e.$attrs,{width:"720px",onRegister:r(Y),onOk:M}),{default:c((()=>[p(r(a),{onRegister:r(w)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}});export{I as _,w as c,y as s};
