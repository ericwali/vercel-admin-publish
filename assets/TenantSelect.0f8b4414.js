var e=(e,n,t)=>new Promise(((a,o)=>{var s=e=>{try{r(t.next(e))}catch(n){o(n)}},l=e=>{try{r(t.throw(e))}catch(n){o(n)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,l);r((t=t.apply(e,n)).next())}));import{c as n}from"./tenant.97003ced.js";import{a1 as t,b6 as a,b7 as o,_ as s}from"./index.6a5548ea.js";import{B as l,bJ as r,r as i,N as u,W as d,Z as c,D as f,_ as m,a2 as p,w as v,u as y,a9 as g,ca as h,bT as I,bS as b}from"./vendor.7c679a32.js";/* empty css              *//* empty css              */const x=g("保存 "),_=g("重置 ");var T=l({setup(l){const g=h,T=I,w=b,j=r,E=r.Item,R=i(),{changeTenantEnv:C,resetTenantEnv:U}=function(){const n=t();return{userStore:n,changeTenantEnv:function(t,o=!0){return e(this,null,(function*(){yield a(t);const e=n.getUserInfo;return e.tenantIds=t,e.tenantId=t.join(","),n.setUserInfo(e),o&&location.reload(),t}))},resetTenantEnv:function(t=!0){return e(this,null,(function*(){yield o(),yield n.getUserInfoAction(),t&&location.reload()}))}}}(),k=u({options:[],modelRef:{tenantIds:[]}});function L(e,n){return n.label.toLowerCase().indexOf(e.toLowerCase())>=0}function O(){return e(this,null,(function*(){const e=yield R.value.validate();yield C(e.tenantIds)}))}function P(){return e(this,null,(function*(){yield U()}))}return d((()=>e(this,null,(function*(){const e=t();k.modelRef.tenantIds=e.getUserInfo.tenantIds;const a=yield n();k.options=a.map((e=>({value:e.code,label:e.name})))})))),(e,n)=>{const t=c("a-button");return f(),m(y(j),{ref:(e,n)=>{n.formElRef=e,R.value=e},model:y(k).modelRef,scrollToFirstError:!0},{default:p((()=>[v(y(E),{name:"tenantIds",style:{"margin-bottom":"0px"},rules:[{required:!0,message:"请至少选择一个多租户,否则会产生无租户数据!"}]},{default:p((()=>[v(y(g),{value:y(k).modelRef.tenantIds,"onUpdate:value":n[0]||(n[0]=e=>y(k).modelRef.tenantIds=e),options:y(k).options,filterOption:L,mode:"multiple",maxTagCount:4,maxTagTextLength:10,placeholder:"请选择多租户",style:{width:"100%"}},null,8,["value","options"])])),_:1}),v(y(E),{style:{"margin-bottom":"0px"}},{default:p((()=>[v(y(T),null,{default:p((()=>[v(y(w),{span:12},{default:p((()=>[v(t,{type:"primary",block:"",onClick:O},{default:p((()=>[v(y(s),{icon:"fa-regular:save"}),x])),_:1})])),_:1}),v(y(w),{span:12},{default:p((()=>[v(t,{color:"warning",block:"",onClick:P},{default:p((()=>[v(y(s),{icon:"ant-design:redo-outlined"}),_])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["model"])}}});export{T as default};
