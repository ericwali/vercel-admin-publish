var e=(e,t,a)=>new Promise(((i,n)=>{var o=e=>{try{d(a.next(e))}catch(t){n(t)}},s=e=>{try{d(a.throw(e))}catch(t){n(t)}},d=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,s);d((a=a.apply(e,t)).next())}));import{P as t}from"./index.8967a476.js";import{_ as a,u as i}from"./useTable.81787a2e.js";import{_ as n}from"./useForm.f93bccee.js";import{_ as o,l as s,c as d,s as l,d as r}from"./DictDataModal.vue_vue&type=script&setup=true&lang.79352687.js";import{b as c}from"./index.1d3e54eb.js";import{a7 as p}from"./index.6a5548ea.js";import{B as u,c1 as m,N as f,t as b,Z as h,bE as g,D as y,_ as j,a2 as x,w as T,a9 as D,J as _,F as w}from"./vendor.7c679a32.js";/* empty css              *//* empty css              *//* empty css              */import"./onMountedOrActivated.51a605f4.js";import"./useWindowSizeFn.bec912bd.js";import"./useContentViewHeight.656bb523.js";import"./props.df8b9a2a.js";import"./const.ba9bd2e6.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./dateUtil.839e4f2c.js";/* empty css              */import"./useSortable.7806d92e.js";/* empty css              *//* empty css              *//* empty css              */import"./index.1c4a88d9.js";/* empty css              */import"./download.38a3a81a.js";import"./index.3b2c921a.js";var S=u({name:"DictDataManagement",components:{BasicTable:a,PageWrapper:t,DictDataModal:o,TableAction:n,ATag:m},setup(){const t=f({dictType:"",single:!0,multiple:!0}),{createConfirm:a,createMessage:n}=p(),[o,{openModal:u}]=c(),[m,{reload:h,clearSelectedRowKeys:g,getSelectRowKeys:y,getForm:j,setProps:x}]=i({api:s,rowKey:"id",columns:d,formConfig:{labelWidth:120,schemas:l,autoSubmitOnEnter:!0},rowSelection:{type:"checkbox"},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:220,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:!1},handleSearchInfoFn:()=>g()});function T(){g(),h()}return{state:t,registerTable:m,registerModal:o,handleAdd:function(){u(!0,{_tag:"add",dictType:t.dictType})},handleEdit:function(e){e=e||{id:y()},u(!0,{_tag:"edit",record:e,dictType:t.dictType})},handleDel:function(t){return e(this,null,(function*(){const i=(null==t?void 0:t.id)||y();a({iconType:"warning",title:"警告",content:`是否确认删除字典数据编号为${i}字典数据吗?`,onOk:()=>e(this,null,(function*(){yield r(i),n.success("删除成功!"),T()}))})}))},handleRefreshTable:T,filterByDictType:function(e){t.dictType=e,j().setFieldsValue({dictType:e}),x({searchInfo:{dictType:e}}),h()},handleSelectionChange:function(e){const a=b(null==e?void 0:e.keys)||[];t.single=1!=a.length,t.multiple=!a.length}}}});const C=D("新增字典数据"),v=D("修改字典数据"),R=D("删除字典数据");S.render=function(e,t,a,i,n,o){const s=h("ATag"),d=h("a-button"),l=h("TableAction"),r=h("BasicTable"),c=h("DictDataModal"),p=h("PageWrapper"),u=g("auth");return y(),j(p,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:x((()=>[T(r,{onRegister:e.registerTable,onSelectionChange:e.handleSelectionChange},{tableTitle:x((()=>[T(s,{color:"red",style:{"font-size":"14px","font-weight":"700"}},{default:x((()=>[D(">>字典数据列表["+_(e.state.dictType)+"]",1)])),_:1})])),toolbar:x((()=>[w(T(d,{type:"primary",disabled:!e.state.dictType,onClick:t[0]||(t[0]=t=>e.handleAdd())},{default:x((()=>[C])),_:1},8,["disabled"]),[[u,["dictData_add"]]]),w(T(d,{type:"primary",disabled:e.state.single,onClick:t[1]||(t[1]=t=>e.handleEdit())},{default:x((()=>[v])),_:1},8,["disabled"]),[[u,["dictData_edit"]]]),w(T(d,{type:"primary",disabled:e.state.multiple,onClick:t[2]||(t[2]=t=>e.handleDel())},{default:x((()=>[R])),_:1},8,["disabled"]),[[u,["dictData_del"]]])])),action:x((({record:t})=>[T(l,{actions:[{label:"编辑",icon:"fa6-regular:pen-to-square",auth:["dictData_edit"],onClick:e.handleEdit.bind(null,t)},{label:"删除",icon:"ant-design:delete-outlined",auth:["dictData_del"],color:"error",onClick:e.handleDel.bind(null,t)}]},null,8,["actions"])])),_:1},8,["onRegister","onSelectionChange"]),T(c,{onRegister:e.registerModal,onSuccess:e.handleRefreshTable},null,8,["onRegister","onSuccess"])])),_:1})};export{S as default};
