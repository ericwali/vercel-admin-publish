var o=(o,e,t)=>new Promise(((n,s)=>{var r=o=>{try{a(t.next(o))}catch(e){s(e)}},c=o=>{try{a(t.throw(o))}catch(e){s(e)}},a=o=>o.done?n(o.value):Promise.resolve(o.value).then(r,c);a((t=t.apply(o,e)).next())}));import{e}from"./vendor.7c679a32.js";import{a2 as t,a3 as n,a1 as s}from"./index.6a5548ea.js";const r=e({id:"app-lock",state:()=>({lockInfo:t.getLocal(n)}),getters:{getLockInfo(){return this.lockInfo}},actions:{setLockInfo(o){this.lockInfo=Object.assign({},this.lockInfo,o),t.setLocal(n,this.lockInfo,!0)},resetLockInfo(){t.removeLocal(n,!0),this.lockInfo=null},unLock(e){return o(this,null,(function*(){var t;const n=s();if((null==(t=this.lockInfo)?void 0:t.pwd)===e)return this.resetLockInfo(),!0;return yield(()=>o(this,null,(function*(){try{const o=n.getUserInfo.userName;n.setAccessToken(""),n.setRefreshToken("");const t=yield n.login({username:o,password:e,goHome:!1,unLock:!0});return t&&this.resetLockInfo(),t}catch(o){return!1}})))()}))}}});export{r as u};
