var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&o(e,t,a[t]);return e},r=(e,l)=>a(e,t(l)),c=(e,a,t)=>new Promise(((l,n)=>{var s=e=>{try{i(t.next(e))}catch(a){n(a)}},o=e=>{try{i(t.throw(e))}catch(a){n(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(s,o);i((t=t.apply(e,a)).next())}));import{c as d,b as u,f as p,ao as m,an as f,_ as y,n as g,a7 as b}from"./index.6a5548ea.js";import{af as v,c1 as _,B as k,bJ as w,aw as P,ca as C,cc as h,r as x,bB as S,N as R,j,t as I,u as q,W as K,Q as O,Z as F,bE as z,D,E as M,w as U,a2 as E,H as Y,K as $,F as B,J as N,bG as T,cj as A,_ as H,bA as J,bz as W,a3 as G,a7 as L,a1 as Q,a9 as Z,cl as V,bM as X,a5 as ee,av as ae,ck as te}from"./vendor.7c679a32.js";import{b as le,a as ne,u as se,c as oe,d as ie}from"./props.df8b9a2a.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./const.ba9bd2e6.js";/* empty css              */import{l as re,_ as ce,d as de}from"./ConfigModal.vue_vue&type=script&setup=true&lang.2090aa51.js";import{b as ue}from"./index.1d3e54eb.js";import{c as pe}from"./dateUtil.839e4f2c.js";import"./useWindowSizeFn.bec912bd.js";import"./onMountedOrActivated.51a605f4.js";const me=[{title:"参数名称",align:"center",dataIndex:"name",width:200},{title:"参数键名",align:"center",dataIndex:"key"},{title:"参数键值",align:"center",dataIndex:"value"},{title:"系统内置",align:"center",dataIndex:"isSys",width:130,customRender:({record:e})=>"0"==e.isSys?v(_,{color:"success"},"是"):v(_,{color:"red"},"否")},{title:"备注",align:"center",dataIndex:"remarks",customRender:({record:e})=>e.remarks||v(_,{color:"red"},"暂无数据")},{title:"创建时间",align:"center",dataIndex:"createTime"},{width:220,title:"操作",align:"center",dataIndex:"action",slots:{customRender:"action"},fixed:!1}],fe=Z("是"),ye=Z("否"),ge=Z("搜索"),be=Z("重置"),ve={style:{width:"100%"}},_e={class:"flex items-center"},ke=Z(N("参数配置列表")),we=Z("新增参数"),Pe=Z("修改参数"),Ce=Z("删除参数"),he={class:"table-settings"},xe={style:{margin:"-2px 0 -2px","padding-top":"5px"}},Se={key:1},Re=Z("修改 "),je=Z("删除 ");var Ie=k({props:le,setup(e){const a=e,t=V,l=w,n=P,s=w.Item,o=P.Item,v=X,_=ee,k=ae,Z=C,le=te,Ie=C.Option,qe=h.RangePicker,Ke=x(null),Oe=x(null),Fe=x(null),{t:ze}=d(),{prefixCls:De}=u("basic-table"),{prefixCls:Me}=u("basic-table-header"),{prefixCls:Ue}=u("basic-table-action"),{createConfirm:Ee,createMessage:Ye}=b(),{toggle:$e,isFullscreen:Be}=S(Ke),[Ne,{openModal:Te}]=ue(),Ae=R({single:!0,multiple:!0,tableInstance:null,queryFormInstance:null,selectedKeys:["middle"],queryParams:{name:void 0,key:void 0,isSys:void 0},dateRange:[],tableProps:{rowKey:"id",columns:me,loading:!1,dataSource:[],rowSelection:{type:"checkbox"},bordered:!0,tableLayout:"fixed"}}),He=j((()=>i(i({},I(a)),Ae.tableProps))),Je=j((()=>Ae.tableProps.dataSource)),We=j((()=>Ae.tableProps.columns)),{getRowSelection:Ge,getRowSelectionRef:Le,getSelectRows:Qe,clearSelectedRowKeys:Ze,getSelectRowKeys:Ve,deleteSelectRowByKey:Xe,setSelectedRowKeys:ea}=ne(He,Je,g),{getPaginationInfo:aa,getPagination:ta,setPagination:la,setShowPagination:na,getShowPagination:sa}=se(He),{getRowClassName:oa}=ie(He,De),{getScrollRef:ia,redoHeight:ra}=oe(He,Oe,We,Le,Je),ca=j((()=>r(i({},Ae.tableProps),{size:Ae.selectedKeys[0],scroll:q(ia),rowClassName:q(oa),rowSelection:q(Le),pagination:I(q(aa))})));function da(){return c(this,null,(function*(){try{Ae.tableProps.loading=!0;const{current:e=1,pageSize:a=10}=ta(),t=yield re(pe(r(i({},Ae.queryParams),{current:e,size:a}),Ae.dateRange));t&&(Ae.tableProps.dataSource=t.data,la({total:t.total}))}finally{Ae.tableProps.loading=!1}}))}function ua(){la({current:1}),Ze(),da()}function pa(){var e;Ae.dateRange=[],null==(e=Ae.queryFormInstance)||e.resetFields(),ua()}function ma(e){la(e),da()}function fa(e){e=e||{id:I(Ve())},Te(!0,{_tag:"edit",record:e})}function ya(e){return c(this,null,(function*(){const a=(null==e?void 0:e.id)||I(Ve());Ee({iconType:"warning",title:"警告",content:`是否确认删除参数编号为${a}参数吗?`,onOk:()=>c(this,null,(function*(){yield de(a),Ye.success("删除成功!"),ua()}))})}))}function ga(){Ze(),da()}return K((()=>{Ae.tableInstance=q(Oe),Ae.queryFormInstance=q(Fe),p((()=>da()),16)})),O(Le,(()=>{var e;e=Ve(),Ae.single=1!=e.length,Ae.multiple=!e.length}),{immediate:!0,deep:!0}),(e,a)=>{const i=F("a-input"),r=F("a-button"),c=z("auth");return D(),M("div",{ref:(e,a)=>{a.wrapRef=e,Ke.value=e},class:$([q(De),[`${q(De)}-form-container`]])},[U(q(l),{ref:(e,a)=>{a.queryFormElRef=e,Fe.value=e},model:q(Ae).queryParams,layout:"inline",colon:!1,labelCol:{span:6},wrapperCol:{style:{width:"260px","margin-bottom":"5px"}}},{default:E((()=>[U(q(s),{label:"参数名称",name:"name"},{default:E((()=>[U(i,{value:q(Ae).queryParams.name,"onUpdate:value":a[0]||(a[0]=e=>q(Ae).queryParams.name=e),placeholder:"请输入参数名称",allowClear:""},null,8,["value"])])),_:1}),U(q(s),{label:"参数键",name:"key"},{default:E((()=>[U(i,{value:q(Ae).queryParams.key,"onUpdate:value":a[1]||(a[1]=e=>q(Ae).queryParams.key=e),placeholder:"请输入参数键",allowClear:""},null,8,["value"])])),_:1}),U(q(s),{label:"系统内置",name:"isSys"},{default:E((()=>[U(q(Z),{value:q(Ae).queryParams.isSys,"onUpdate:value":a[2]||(a[2]=e=>q(Ae).queryParams.isSys=e),placeholder:"请选择",allowClear:""},{default:E((()=>[U(q(Ie),{key:"0"},{default:E((()=>[fe])),_:1}),U(q(Ie),{key:"1"},{default:E((()=>[ye])),_:1})])),_:1},8,["value"])])),_:1}),U(q(s),{label:"创建时间"},{default:E((()=>[U(q(qe),{value:q(Ae).dateRange,"onUpdate:value":a[3]||(a[3]=e=>q(Ae).dateRange=e),style:{width:"100%"},valueFormat:"YYYY-MM-DD",placeholder:["开始日期","结束日期"]},null,8,["value"])])),_:1}),U(q(s),null,{default:E((()=>[U(r,{type:"primary",class:"mr-2",onClick:ua},{default:E((()=>[ge])),_:1}),U(r,{type:"default",class:"mr-2",onClick:pa},{default:E((()=>[be])),_:1})])),_:1})])),_:1},8,["model"]),U(q(t),Q({ref:(e,a)=>{a.tableElRef=e,Oe.value=e}},q(ca),{onChange:ma}),{title:E((()=>[Y("div",ve,[Y("div",_e,[U(q(m),null,{default:E((()=>[ke])),_:1}),Y("div",{class:$(`${q(Me)}__toolbar`)},[B(U(r,{type:"primary",onClick:a[4]||(a[4]=e=>{Te(!0,{_tag:"add"})})},{default:E((()=>[we])),_:1},512),[[c,["config_add"]]]),B(U(r,{type:"primary",disabled:q(Ae).single,onClick:a[5]||(a[5]=e=>fa())},{default:E((()=>[Pe])),_:1},8,["disabled"]),[[c,["config_edit"]]]),B(U(r,{type:"primary",disabled:q(Ae).multiple,onClick:a[6]||(a[6]=e=>ya())},{default:E((()=>[Ce])),_:1},8,["disabled"]),[[c,["config_del"]]]),U(q(v),{type:"vertical"}),Y("div",he,[U(q(_),{placement:"top"},{title:E((()=>[Y("span",null,N(q(ze)("common.redo")),1)])),default:E((()=>[U(q(T),{onClick:ua})])),_:1}),U(q(_),{placement:"top"},{title:E((()=>[Y("span",null,N(q(ze)("component.table.settingDens")),1)])),default:E((()=>[U(q(k),{trigger:["click"],getPopupContainer:q(f),placement:"bottomCenter"},{overlay:E((()=>[U(q(n),{selectedKeys:q(Ae).selectedKeys,"onUpdate:selectedKeys":a[7]||(a[7]=e=>q(Ae).selectedKeys=e),selectable:""},{default:E((()=>[U(q(o),{key:"default"},{default:E((()=>[Y("span",null,N(q(ze)("component.table.settingDensDefault")),1)])),_:1}),U(q(o),{key:"middle"},{default:E((()=>[Y("span",null,N(q(ze)("component.table.settingDensMiddle")),1)])),_:1}),U(q(o),{key:"small"},{default:E((()=>[Y("span",null,N(q(ze)("component.table.settingDensSmall")),1)])),_:1})])),_:1},8,["selectedKeys"])])),default:E((()=>[U(q(A))])),_:1},8,["getPopupContainer"])])),_:1}),U(q(_),{placement:"top"},{title:E((()=>[Y("span",null,N(q(ze)("component.table.settingFullScreen")),1)])),default:E((()=>[q(Be)?(D(),H(q(W),{key:1,onClick:q($e)},null,8,["onClick"])):(D(),H(q(J),{key:0,onClick:q($e)},null,8,["onClick"]))])),_:1})])],2)]),Y("div",xe,[G(e.$slots,"tableTop",{},(()=>[U(q(le),{type:"info","show-icon":"",class:"alert"},{message:E((()=>[q(Ve)().length>0?(D(),M(L,{key:0},[Y("span",null,"已选中 "+N(q(Ve)().length)+" 条记录(可跨页)",1),U(q(v),{type:"vertical"}),Y("a",{onClick:a[8]||(a[8]=e=>q(ea)([]))},"清空")],64)):(D(),M("span",Se,"未选中任何数据"))])),_:1})]))])])])),action:E((({record:e})=>[Y("div",{class:$([q(Ue),"center"])},[B(U(r,{type:"link",size:"small",onClick:a=>fa(e)},{default:E((()=>[U(y,{icon:"fa6-regular:pen-to-square",size:14}),Re])),_:2},1032,["onClick"]),[[c,["config_edit"]]]),U(q(v),{type:"vertical",class:"action-divider"}),B(U(r,{type:"link",size:"small",color:"error",onClick:a=>ya(e)},{default:E((()=>[U(y,{icon:"ant-design:delete-outlined",size:15}),je])),_:2},1032,["onClick"]),[[c,["config_del"]]])],2)])),_:3},16),U(ce,{onRegister:q(Ne),onSuccess:ga},null,8,["onRegister"])],2)}}});export{Ie as default};
