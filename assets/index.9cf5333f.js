var e=(e,t,a)=>new Promise(((i,n)=>{var o=e=>{try{s(a.next(e))}catch(t){n(t)}},l=e=>{try{s(a.throw(e))}catch(t){n(t)}},s=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,l);s((a=a.apply(e,t)).next())}));import{P as t}from"./index.8967a476.js";import{_ as a,u as i}from"./useTable.81787a2e.js";import{_ as n}from"./useForm.f93bccee.js";import{_ as o,l,c as s,s as d,d as r}from"./DictModal.vue_vue&type=script&setup=true&lang.91c26556.js";import{b as c}from"./index.1d3e54eb.js";import{a7 as u}from"./index.6a5548ea.js";import p from"./DictDataTable.e7dff00c.js";import{B as m,r as b,N as f,t as h,Z as g,bE as j,D as x,_ as y,a2 as w,w as S,F as C,a9 as T}from"./vendor.7c679a32.js";/* empty css              *//* empty css              */import"./onMountedOrActivated.51a605f4.js";import"./useWindowSizeFn.bec912bd.js";import"./useContentViewHeight.656bb523.js";import"./props.df8b9a2a.js";import"./const.ba9bd2e6.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./dateUtil.839e4f2c.js";/* empty css              */import"./useSortable.7806d92e.js";/* empty css              *//* empty css              *//* empty css              */import"./index.1c4a88d9.js";/* empty css              */import"./download.38a3a81a.js";import"./index.3b2c921a.js";import"./DictDataModal.vue_vue&type=script&setup=true&lang.79352687.js";var _=m({name:"DictManagement",components:{BasicTable:a,PageWrapper:t,DictModal:o,DictDataTable:p,TableAction:n},setup(){const t=b(),a=f({single:!0,multiple:!0}),{createConfirm:n,createMessage:o}=u(),[p,{openModal:m}]=c(),[g,{reload:j,clearSelectedRowKeys:x,getSelectRows:y}]=i({title:"字典列表",api:l,rowKey:"id",columns:s,formConfig:{labelWidth:80,schemas:d,autoSubmitOnEnter:!0},rowSelection:{type:"checkbox"},useSearchForm:!0,showTableSetting:!0,bordered:!0,showIndexColumn:!1,clickToRowSelect:!1,actionColumn:{width:220,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:!1},handleSearchInfoFn:()=>x()});function w(){x(),t.value.handleRefreshTable(),j()}return{state:a,registerTable:g,registerModal:p,dictSubRef:t,handleClickSubTable:function(e){t.value.filterByDictType(null==e?void 0:e.type)},handleAdd:function(){m(!0,{_tag:"add"})},handleEdit:function(e){e=e||{id:y().map((e=>e.id))},m(!0,{_tag:"edit",record:e})},handleDel:function(t){return e(this,null,(function*(){const a=(null==t?void 0:t.type)||y().map((e=>e.type));n({iconType:"warning",title:"警告",content:`是否确认删除字典类型为${a}字典吗?`,onOk:()=>e(this,null,(function*(){yield r(a),o.success("删除成功!"),w()}))})}))},handleRefreshTable:w,handleSelectionChange:function(e){const t=h(null==e?void 0:e.keys)||[];a.single=1!=t.length,a.multiple=!t.length}}}});const v=T("新增字典"),D=T("修改字典"),R=T("删除字典");_.render=function(e,t,a,i,n,o){const l=g("a-button"),s=g("TableAction"),d=g("BasicTable"),r=g("DictDataTable"),c=g("DictModal"),u=g("PageWrapper"),p=j("auth");return x(),y(u,{dense:"",fixedHeight:"",contentFullHeight:"",contentClass:"flex"},{default:w((()=>[S(d,{class:"w-2/4 xl:w-2/4",onRegister:e.registerTable,onSelectionChange:e.handleSelectionChange,onRowClick:e.handleClickSubTable},{toolbar:w((()=>[C(S(l,{type:"primary",onClick:t[0]||(t[0]=t=>e.handleAdd())},{default:w((()=>[v])),_:1},512),[[p,["dict_add"]]]),C(S(l,{type:"primary",disabled:e.state.single,onClick:t[1]||(t[1]=t=>e.handleEdit())},{default:w((()=>[D])),_:1},8,["disabled"]),[[p,["dict_edit"]]]),C(S(l,{type:"primary",disabled:e.state.multiple,onClick:t[2]||(t[2]=t=>e.handleDel())},{default:w((()=>[R])),_:1},8,["disabled"]),[[p,["dict_del"]]])])),action:w((({record:t})=>[S(s,{actions:[{label:"编辑",icon:"fa6-regular:pen-to-square",auth:["dict_edit"],onClick:e.handleEdit.bind(null,t)},{label:"删除",icon:"ant-design:delete-outlined",auth:["dict_del"],color:"error",onClick:e.handleDel.bind(null,t)}]},null,8,["actions"])])),_:1},8,["onRegister","onSelectionChange","onRowClick"]),S(r,{ref:"dictSubRef",class:"w-2/4 xl:w-2/4"},null,512),S(c,{onRegister:e.registerModal,onSuccess:e.handleRefreshTable},null,8,["onRegister","onSuccess"])])),_:1})};export{_ as default};
