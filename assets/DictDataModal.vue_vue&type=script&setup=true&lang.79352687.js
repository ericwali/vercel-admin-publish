var e=(e,t,s)=>new Promise(((a,o)=>{var l=e=>{try{r(s.next(e))}catch(t){o(t)}},i=e=>{try{r(s.throw(e))}catch(t){o(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);r((s=s.apply(e,t)).next())}));import{d as t,c as s}from"./useForm.f93bccee.js";import{af as a}from"./index.6a5548ea.js";import{a as o,B as l}from"./index.1d3e54eb.js";import{B as i,r,u as d,D as n,_ as p,a2 as c,w as m,a1 as u}from"./vendor.7c679a32.js";const y=[{title:"字典数据类型",dataIndex:"dictType"},{title:"字典数据标签",dataIndex:"label"},{title:"字典数据键值",dataIndex:"value",width:120},{title:"字典数据排序",dataIndex:"sort",width:120}],f=[{field:"dictType",label:"字典数据类型",component:"Input",componentProps:{placeholder:"请输入字典数据类型"},colProps:{span:12}},{field:"label",label:"字典数据标签",component:"Input",componentProps:{placeholder:"请输入字典数据标签"},colProps:{span:12}}],b=[{field:"id",label:"ID",component:"Input",show:!1},{field:"dictType",label:"字典类型",component:"Input",required:!0,componentProps:{disabled:!0},colProps:{span:12}},{field:"label",label:"字典标签",component:"Input",required:!0,colProps:{span:12}},{field:"value",label:"字典键值",component:"Input",required:!0,colProps:{span:12}},{field:"sort",label:"排序",component:"InputNumber",componentProps:{style:{width:"100%"},min:0},required:!0,colProps:{span:12}},{field:"remarks",label:"备注",component:"InputTextArea",componentProps:{rows:6},colProps:{span:24}}];var h,v;(v=h||(h={})).list="/system_proxy/system/dictData/list",v.add="/system_proxy/system/dictData/save",v.get="/system_proxy/system/dictData",v.edit="/system_proxy/system/dictData/update",v.del="/system_proxy/system/dictData/remove",v.getByDictType="/system_proxy/system/dictData/dictType";const x=e=>a.get({url:h.list,params:e},{isReturnResultResponse:!0}),g=e=>a.delete({url:`${h.del}/${e}`});var P=i({emits:["success","register"],setup(i,{emit:y}){const f=r(""),[v,{resetFields:x,setFieldsValue:g,validate:P,clearValidate:I}]=t({labelWidth:100,schemas:b,showActionButtonGroup:!1,baseColProps:{span:24}}),[w,{setModalProps:_,closeModal:D}]=o(((...t)=>e(this,[...t],(function*(e={_tag:""}){var t;yield x(),yield I(),f.value=e._tag;const s=e.dictType,o=null==(t=e.record)?void 0:t.id,l={confirmLoading:!1};switch(d(f)){case"add":l.title="新增字典数据",yield g({dictType:s});break;case"edit":l.title="编辑字典数据",yield g(Object.assign({},{dictType:s},yield(i=o,a.get({url:`${h.get}/${i}`}))))}var i;_(l)}))));function T(){return e(this,null,(function*(){try{const t=yield P();switch(_({confirmLoading:!0}),d(f)){case"add":yield(e=t,a.post({url:h.add,data:e}));break;case"edit":yield(e=>a.put({url:h.edit,data:e}))(t)}D(),y("success")}finally{_({confirmLoading:!1})}var e}))}return(e,t)=>(n(),p(d(l),u(e.$attrs,{width:"720px",onRegister:d(w),onOk:T}),{default:c((()=>[m(d(s),{onRegister:d(v)},null,8,["onRegister"])])),_:1},16,["onRegister"]))}});export{P as _,y as c,g as d,x as l,f as s};
