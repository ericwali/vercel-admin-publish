var e,t,o=(e,t,o)=>new Promise(((i,n)=>{var s=e=>{try{r(o.next(e))}catch(t){n(t)}},a=e=>{try{r(o.throw(e))}catch(t){n(t)}},r=e=>e.done?i(e.value):Promise.resolve(e.value).then(s,a);r((o=o.apply(e,t)).next())}));import{u as i,_ as n}from"./useTable.81787a2e.js";import{_ as s}from"./useForm.f93bccee.js";import{af as a,a7 as r}from"./index.6a5548ea.js";import{B as d,D as l,E as c,w as m,a2 as p,u}from"./vendor.7c679a32.js";import"./props.df8b9a2a.js";import"./const.ba9bd2e6.js";import"./useWindowSizeFn.bec912bd.js";import"./index.1d3e54eb.js";import"./onMountedOrActivated.51a605f4.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./dateUtil.839e4f2c.js";/* empty css              */import"./useSortable.7806d92e.js";/* empty css              *//* empty css              *//* empty css              */import"./index.1c4a88d9.js";/* empty css              */import"./download.38a3a81a.js";import"./index.3b2c921a.js";(t=e||(e={})).list="/monitor_proxy/monitor/token/list",t.del="/monitor_proxy/monitor/token/remove";const x=t=>a.get({url:e.list,params:t},{isReturnResultResponse:!0}),f=[{title:"用户编号",dataIndex:"user_info.id"},{title:"用户名称",dataIndex:"user_info.username"},{title:"客户端",dataIndex:"clientId"},{title:"令牌",dataIndex:"access_token"},{title:"类型",dataIndex:"token_type"},{title:"过期时间",dataIndex:"expires_in"}];var j=d({setup(t){const{createConfirm:d,createMessage:j}=r(),[b,{reload:v}]=i({title:"令牌列表",api:x,columns:f,showTableSetting:!0,bordered:!0,showIndexColumn:!1,tableSetting:{fullScreen:!0},actionColumn:{width:120,title:"操作",dataIndex:"action",slots:{customRender:"action"},fixed:!1}});function _(t){return o(this,null,(function*(){const i=null==t?void 0:t.access_token;d({iconType:"warning",title:"警告",content:`是否强制${i}下线?`,onOk:()=>o(this,null,(function*(){var t;yield(t=i,a.delete({url:`${e.del}/${t}`})),j.success("下线成功!"),v()}))})}))}return(e,t)=>(l(),c("div",null,[m(u(n),{onRegister:u(b)},{action:p((({record:e})=>[m(u(s),{actions:[{label:"删除",icon:"ant-design:delete-outlined",color:"error",auth:["client_del"],onClick:_.bind(null,e)}]},null,8,["actions"])])),_:1},8,["onRegister"])]))}});export{j as default};
